<!DOCTYPE html>

<html lang='en'>

    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <title>Chris' notes</title>
        <link rel='stylesheet' type='text/css' href='../style.css' media='screen' />
        <!-- bootstrap -->
        <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css'
            integrity='sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z' crossorigin='anonymous'>
        <!-- bootstrap -->
    </head>

    <body>
        <header>
            <nav>
                <ul>
                    <li><a href='../about.html'>About</a></li>
                    <li><a href='../index.html'>Home</a></li>
                </ul>
                <a href='../index.html' class='title'>Chris' notes</a>
            </nav>
        </header>

        <main>
<h1>how to create custom terminal commands</h1>
<p>Creating custom terminal commands can change having to type something long like this:</p>
<p><code>py -3.10 &quot;C:\Users\chris\Documents\programming\refactor-todo-list\create_task.py&quot;</code></p>
<p>to something like this:</p>
<p><code>todo</code></p>
<p>This will work no matter which directory the terminal is in and can temporarily change directories and/or activate a virtual environment if needed.</p>
<p>Some programming languages have their own tools for creating custom terminal commands (links to a few are listed below), but sometimes creating the command in one of the other ways on this page is easier overall.</p>
<ul>
<li><a href="https://go.dev/doc/tutorial/compile-install">Go</a> – compile and install the application</li>
<li><a href="https://stackoverflow.com/questions/48884796/how-to-set-up-entry-points-in-setup-cfg">Python</a> – how to set up entry_points in setup.cfg</li>
</ul>
<h2>Mac and Linux</h2>
<p><a href="https://medium.com/devnetwork/how-to-create-your-own-custom-terminal-commands-c5008782a78e">This guide</a> seems well-written (no need to rewrite the wheel).</p>
<h2>Windows</h2>
<p>I recommend checking out <a href="https://aka.ms/terminal">Windows Terminal</a> if you're choosing a terminal app.</p>
<h3>temporary commands</h3>
<p>If you already have an executable file, a super quick way to create a command that only lasts until you close the terminal is to run <code>$env:Path += ';C:\path\to\my\executable\file.exe'</code> in PowerShell.</p>
<h3>permanent commands</h3>
<ol>
<li>In PowerShell, enter <code>notepad $profile</code>. This should open a PowerShell file (the file extension should be <code>.ps1</code>.</li>
<li>In this file, you can create custom terminal commands by defining PowerShell functions. For example,</li>
</ol>
<pre><code class="language-powershell"><div class="source"><span></span><span class="k">function</span> <span class="n">hi</span> <span class="p">{</span>
    <span class="nb">Write-Host</span> <span class="s2">&quot;hello&quot;</span>
<span class="p">}</span></div></code></pre><p>This creates a <code>hi</code> command that responds with <code>hello</code> when used.</p>
<ol start="3">
<li>Save the file.</li>
<li>Restart your terminal.</li>
<li>Try your new command.</li>
</ol>
<p>Here are more examples:</p>
<pre><code class="language-powershell"><div class="source"><span></span><span class="c"># This function runs a program.</span>
<span class="k">function</span> <span class="n">matrix</span> <span class="p">{</span>
    <span class="p">&amp;</span> <span class="s2">&quot;C:\Users\chris\Documents\programming\the_matrix\x64\Debug\the_matrix.exe&quot;</span>
<span class="p">}</span>

<span class="c"># You can run any type of executable file this way, not just .exe files.</span>
<span class="k">function</span> <span class="n">psql</span> <span class="p">{</span>
    <span class="p">&amp;</span> <span class="s2">&quot;C:/ProgramData/Microsoft/Windows/Start Menu/Programs/PostgreSQL 15/SQL Shell (psql).lnk&quot;</span>
<span class="p">}</span>

<span class="c"># This runs a Python program. The $args at the end sends any inputs for the command from</span>
<span class="c"># the terminal to the program. If all the inputs should be in one string, you can put</span>
<span class="c"># double quotes around it: &quot;$args&quot;.</span>
<span class="k">function</span> <span class="n">rand</span> <span class="p">{</span>
    <span class="n">py</span> <span class="n">C</span><span class="p">:/</span><span class="n">Users</span><span class="p">/</span><span class="n">chris</span><span class="p">/</span><span class="n">Documents</span><span class="p">/</span><span class="n">programming</span><span class="p">/</span><span class="n">rand</span><span class="p">/</span><span class="n">main</span><span class="p">.</span><span class="n">py</span> <span class="nv">$args</span>
<span class="p">}</span>

<span class="c"># Some programs need to temporarily change the directory and/or activate a virtual</span>
<span class="c"># environment while running.</span>
<span class="k">function</span> <span class="n">todo</span> <span class="p">{</span>
    <span class="nv">$originalPath</span> <span class="p">=</span> <span class="nb">pwd</span>
    <span class="nb">cd </span><span class="n">C</span><span class="p">:/</span><span class="n">Users</span><span class="p">/</span><span class="n">chris</span><span class="p">/</span><span class="n">Documents</span><span class="p">/</span><span class="n">programming</span><span class="p">/</span><span class="n">refactor-todo-list</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="n">venv</span><span class="p">/</span><span class="n">Scripts</span><span class="p">/</span><span class="n">Activate</span><span class="p">.</span><span class="n">ps1</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="n">py</span> <span class="n">create_task</span><span class="p">.</span><span class="n">py</span> <span class="s2">&quot;$args&quot;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
            <span class="n">deactivate</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="nb">cd </span><span class="nv">$originalPath</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c"># Make a folder easier to open.</span>
<span class="k">function</span> <span class="n">binds</span> <span class="p">{</span>
    <span class="n">explorer</span> <span class="s2">&quot;C:\Users\chris\Documents\programming\binds&quot;</span>
<span class="p">}</span>

<span class="c"># Here&#39;s how you can customize what your terminal prompts look like.</span>
<span class="k">function</span> <span class="n">prompt</span> <span class="p">{</span>
    <span class="c"># https://hodgkins.io/ultimate-powershell-prompt-and-git-setup</span>
    <span class="nv">$realLASTEXITCODE</span> <span class="p">=</span> <span class="nv">$LASTEXITCODE</span>
    <span class="nb">Write-Host</span> <span class="p">$($(</span><span class="nb">Get-Location</span><span class="p">)</span> <span class="o">-replace</span> <span class="s2">&quot;\\&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span> <span class="n">-ForegroundColor</span> <span class="n">Blue</span>
    <span class="nv">$global:LASTEXITCODE</span> <span class="p">=</span> <span class="nv">$realLASTEXITCODE</span>
    <span class="k">return</span> <span class="s2">&quot;&gt; &quot;</span>
<span class="p">}</span>

<span class="c"># This command shows or searches your command history across sessions (unlike the built-in</span>
<span class="c"># `h` and `r` commands). This was written by Adam Wemlinger.</span>
<span class="k">function</span> <span class="n">hist</span> <span class="p">{</span>
    <span class="c"># https://superuser.com/questions/1195895/view-full-history-for-powershell-not-just-current-session</span>
    <span class="nv">$find</span> <span class="p">=</span> <span class="nv">$args</span><span class="p">;</span> 
    <span class="nb">Write-Host</span> <span class="s2">&quot;Finding in full history using {</span><span class="se">`$</span><span class="s2">_ -like </span><span class="se">`&quot;</span><span class="s2">*$find*</span><span class="se">`&quot;</span><span class="s2">}&quot;</span><span class="p">;</span> 
    <span class="nb">Get-Content</span> <span class="p">(</span><span class="nb">Get-PSReadlineOption</span><span class="p">).</span><span class="n">HistorySavePath</span> <span class="p">|</span> <span class="p">?</span> <span class="p">{</span><span class="nv">$_</span> <span class="o">-like</span> <span class="s2">&quot;*$find*&quot;</span><span class="p">}</span> <span class="p">|</span> <span class="nb">Get-Unique</span> <span class="p">|</span> <span class="n">more</span> 
<span class="p">}</span>

<span class="c"># Activate a Python virtual environment named &quot;venv&quot; by simply entering &quot;venv&quot;. For</span>
<span class="c"># environments with something after venv like &quot;venv311&quot;, enter &quot;venv 311&quot;.</span>
<span class="k">function</span> <span class="n">venv</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$args</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">Invoke-Expression</span> <span class="s2">&quot;venv$args/Scripts/Activate.ps1&quot;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">venv</span><span class="p">/</span><span class="n">Scripts</span><span class="p">/</span><span class="n">Activate</span><span class="p">.</span><span class="n">ps1</span>
    <span class="p">}</span>
<span class="p">}</span></div></code></pre><p>If you don't want to add all your commands to one file, you can create a folder, add it to PATH (see <a href="20220429185353.html">[§] how to edit PATH in Windows</a>), and add executable files to that folder. The files can truly be any type of executable file, such as <code>.exe</code>, or <code>.py</code> if you're using Python, or <code>.bat</code> or <code>.cmd</code> if you want to use <a href="https://www.tutorialspoint.com/batch_script/batch_script_quick_guide.htm">Batch scripts</a>, or <code>.ps1</code> if you would prefer to use <a href="https://devblogs.microsoft.com/scripting/table-of-basic-powershell-commands/">PowerShell commands</a>. After adding these file(s) to the folder, restart your terminal and enter the file's name without the extension to run the command.</p>
<h2>more about PowerShell profiles</h2>
<ul>
<li><a href="20230206213946.html">[§] how to customize terminal prompts in Windows</a></li>
<li><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.3">Microsoft's docs</a></li>
</ul>
<h2>how to receive command line arguments</h2>
<p>Every widely-used general-purpose programming language has a way to receive command line inputs. Here are guides for a few:</p>
<ul>
<li><a href="20230615210050.html">[§] C++ command line arguments</a></li>
<li><a href="https://docs.python.org/3/library/argparse.html">Python's <code>argparse</code> library</a></li>
<li><a href="https://pkg.go.dev/flag">Go's <code>flag</code> library</a></li>
</ul>
</main>

<footer>
    
</footer>

<!-- bootstrap -->
<script src='https://code.jquery.com/jquery-3.5.1.slim.min.js'
    integrity='sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj'
    crossorigin='anonymous'></script>
<script src='https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js'
    integrity='sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN'
    crossorigin='anonymous'></script>
<script src='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js'
    integrity='sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV'
    crossorigin='anonymous'></script>
<!-- bootstrap -->
</body>

</html>
